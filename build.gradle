apply plugin: 'java'
apply plugin: 'scala'
apply plugin: 'eclipse'

repositories {
    mavenCentral()
}

eclipse {
    classpath {
        downloadSources = true
        downloadJavadoc = true
    }
}

apply plugin: 'idea'
idea{
    module {
        downloadJavadoc = true
        downloadSources = true
    }
}

dependencies {
    compile 'org.scala-lang:scala-library:2.12.2'
    compile 'it.unibo.apice.scafiteam:scafi-simulator-gui_2.12:0.3.0'
}

task fatJar(type: Jar, dependsOn: subprojects.compileJava) {
    manifest {
        attributes 'Implementation-Title': 'Redistributable JAR',
                'Implementation-Version': rootProject.version,
                'Main-Class': 'it.unibo.demos.coord18.Coord18DemoLauncher'
    }
    baseName = "${rootProject.name}-executable"
    from(configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }) {
        // remove all signature files
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
        exclude '.gradle'
        exclude 'build.gradle'
        exclude 'gradle'
        exclude 'gradlew'
        exclude 'gradlew.bat'
    }
    with jar }
build.dependsOn(fatJar)
